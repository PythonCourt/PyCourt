# === ğŸ›ï¸ PyCourt Supreme Court - Courtroom & Judge Messages (EN) ===

courtroom:
  supreme_court:
    start: "ğŸ›ï¸ PyCourt Supreme Court is now in session..."
    summary_failed: "âŒ Found {count} constitutional violations:"
    summary_passed: "âœ… Review passed, no violations found in the selected scope"

  audit_clerk:
    deps_missing_title: "âŒ Required audit tools are missing"
    deps_must_install: "ğŸ›ï¸ **[Imperial Decree]** The following tools are core to the audit system and must be installed:"
    deps_install_guide: "ğŸ’¡ Installation guide:"
    deps_refuse_run: "ğŸ›ï¸ The audit system refuses to run when required tools are missing!"

# === ğŸ›ï¸ Judge templates by law code (EN) ===

judges:
  AC001:
    template: |
      ğŸ¦† Duck Typing Inspector: Detected misuse of Any type
      ğŸ“Œ Target variable/attribute: {target_name}
      ğŸ“‹ Annotation: {annotation_str}
      ğŸ’¡ Suggestion: Avoid using Any. Introduce an explicit contract type (DTO / Protocol / TypedDict).
      ğŸ”§ Quick fix examples:
        - Define a Pydantic model under `core/dto` and reference that model type here.
        - Or use `TypedDict` / `Protocol` to describe the structure instead of Any.

  AC002:
    template: |
      ğŸ¦† Type System Auditor: Detected a dict without a value contract
      ğŸ“Œ Target variable/attribute: {target_name}
      ğŸ“‹ Annotation: {annotation_str}
      ğŸ’¡ Suggestion: Do not use raw dict. Introduce explicit key/value models or type aliases.
      ğŸ”§ Quick fix examples:
        - Wrap the business dict in `RootModel[dict[str, DTO]]`.
        - Define DTO / TypedDict / Protocol for the value type and reference it in dict[...].

  AC003:
    template: |
      ğŸ¦† Type System Auditor: Detected suspicious use of typing.cast
      ğŸ“Œ Expression: {annotation_str}
      ğŸ’¡ Suggestion: `cast` should be a last resort. Prefer fixing type signatures and contracts instead.
      ğŸ”§ Quick fix examples:
        - Trace data origins so the type checker can infer the correct type naturally.
        - For cross-layer calls, define DTOs / protocols in `core/dto` instead of casting at call sites.
        - For necessary casts, add a nearby comment `# cast justified: ...` documenting the reason.

  BC001:
    template: |
      ğŸ›ï¸ Boundary Control Judge: Detected boundary contract violation
      ğŸ“Œ Function: {func}
      ğŸ“‹ Offending parameter: {name} -> {type}
      ğŸ’¡ Suggestion: Define a Pydantic DTO under `core/dto`.
      ğŸ”§ Quick fix: Use `pydantic.BaseModel` to define a contract type.

  DI001:
    template: |
      ğŸ›ï¸ Dependency Inversion Judge: Detected illegal cross-component dependency
      ğŸ“‹ Offending import: {imported_module}
      ğŸ’¡ Suggestion: Access other components via core abstractions or DI container wiring.
      ğŸ”§ Quick fix: Define an interface in `core/port` and inject the implementation via DI.

  DS001:
    template: |
      ğŸ›ï¸ Docstring Judge: Detected missing function docstring
      ğŸ“Œ Function: {func}
      ğŸ’¡ Suggestion: Add a docstring describing behavior, parameters and return value.
      ğŸ”§ Quick fix: Use Google/NumPy style docstrings.

  DS002:
    template: |
      ğŸ›ï¸ Docstring Judge: Detected insufficient class documentation
      ğŸ“Œ Class: {klass}
      ğŸ“‹ Requirement: Docstring length must be at least {min_len} characters
      ğŸ’¡ Suggestion: Add a docstring describing the class responsibility and usage.
      ğŸ”§ Quick fix: Add a triple-quoted docstring right below the class definition.

  DT001:
    template: |
      ğŸ›ï¸ Time Judge: Detected direct usage of datetime.now()/utcnow()
      ğŸ’¡ Suggestion: Access time through a ClockPort interface.
      ğŸ”§ Quick fix: Inject a ClockPort dependency to support virtual/accelerated timelines.

  HC001:
    template: |
      ğŸ›ï¸ Hardcoding Judge: Detected hardcoded string
      ğŸ“Œ Code snippet: {snippet}
      ğŸ’¡ Suggestion: Move literals into configuration or constants as described in docs/CONSTANTS-GUIDE.md.
      ğŸ”§ Quick fix: Extract the literal into a constant or configuration file.

  HC002:
    template: |
      ğŸ›ï¸ Constants Judge: Detected bare constant import
      ğŸ“Œ Constant: {name}
      ğŸ’¡ Suggestion: Import the namespace class instead of a bare constant.
      ğŸ”§ Quick fix: See docs/GUIDE/CONSTANTS.md.

  HC003:
    template: |
      ğŸ›ï¸ Constants Judge: Detected bare constant definition
      ğŸ“Œ Constant: {name}
      ğŸ’¡ Suggestion: Move it into a dedicated constants module and organize with namespace classes.
      ğŸ”§ Quick fix: See docs/GUIDE/CONSTANTS.md.

  HC004:
    template: |
      ğŸ›ï¸ Constants Judge: Detected cross-engine import of business constants
      ğŸ“‹ Source: {source}
      ğŸ’¡ Suggestion: If this must be shared, promote it to a system-level constant.
      ğŸ”§ Quick fix: See docs/GUIDE/CONSTANTS.md.

  HC005:
    template: |
      ğŸ›ï¸ Magic Number Judge: Detected hardcoded tunable business parameter
      ğŸ“Œ Code snippet: {snippet}
      ğŸ“‹ Impact: Thresholds/weights/window sizes, when hardcoded, cannot be safely tuned per environment or version.
      ğŸ’¡ Suggestion: Move such parameters into assets/rules or assets/skills and access via RulesProviderPort / SkillProviderPort.
      ğŸ”§ Quick fix:
        - Add corresponding fields under assets/rules or assets/skills (for tasks like rating/highlight/memory.slice, etc.).
        - Access them through RulesProviderPort or SkillProviderPort instead of using literals.
        - If a fallback default is needed, centralize it in a domain.constants module and prefer config values, falling back only when missing.

  LL001:
    template: |
      ğŸ›ï¸ Complexity Judge: Detected overly long function
      ğŸ“Œ Function: {func}
      ğŸ“‹ Current length: {lines} lines (limit: {limit})
      ğŸ’¡ Suggestion: Split into smaller, more focused helper functions.
      ğŸ”§ Quick fix: Extract sub-functions so each does exactly one thing.

  LL002:
    template: |
      ğŸ›ï¸ Complexity Judge: Detected high cyclomatic complexity
      ğŸ“Œ Function: {func}
      ğŸ“‹ Complexity: {complexity} (limit: {limit})
      ğŸ’¡ Suggestion: Review if/for/while branches and simplify control flow.
      ğŸ”§ Quick fix: Use strategy pattern, extract sub-functions, or refactor control structures.

  OU001:
    template: |
      ğŸ›ï¸ Grey Fog Judge: Detected usage of `object` as a type
      ğŸ’¡ Suggestion: Introduce explicit base classes under core/dto or core/port.
      ğŸ”§ Quick fix: Replace bare `object` with Protocol or concrete types.

  PC001:
    template: |
      ğŸ›ï¸ Parameter Classification Judge: Detected operational parameter in core constants
      ğŸ“Œ Constant: {const_name}
      ğŸ’¡ Suggestion: Move this operational parameter from core constants into assets/rules, provided by a rules provider.
      ğŸ”§ Quick fix: Add a rules file under assets/rules and access it through a RulesProvider (or equivalent abstraction).

  PC002:
    template: |
      ğŸ›ï¸ Parameter Classification Judge: Detected direct access to rules assets, bypassing RulesProviderPort
      ğŸ“‹ Offending code: {snippet}
      ğŸ’¡ Suggestion: Do not open/read assets/rules or rules/** directly. Always go through the rules provider abstraction.
      ğŸ”§ Quick fix: Use the project's RulesProvider abstraction and RuleId to access rule configuration.

  RE001:
    template: |
      ğŸ›ï¸ Facade Discipline Judge: Detected oversized __init__.py
      ğŸ“‹ Current code lines: {code_count} (limit: {max_init_lines})
      ğŸ’¡ Suggestion: Keep facades slim; avoid piling implementation details into __init__.py.
      ğŸ”§ Quick fix: Move implementation into dedicated modules.

  RE002:
    template: |
      ğŸ›ï¸ Facade Discipline Judge: Detected business logic in __init__.py
      ğŸ“‹ Offending node type: {node_type}
      ğŸ’¡ Suggestion: Move implementation to dedicated modules.
      ğŸ”§ Quick fix: Only import and expose symbols at call sites.

  RE003:
    template: |
      ğŸ›ï¸ Facade Discipline Judge: Detected disallowed structures in __init__.py
      ğŸ“‹ Detail: {detail}
      ğŸ’¡ Suggestion: Facades should only contain lightweight metadata and minimal glue.
      ğŸ”§ Quick fix: Move implementation into dedicated modules and keep __init__.py minimal.

  SK001:
    template: |
      ğŸ›ï¸ Skills Usage Judge: Detected hardcoded Skill ID string
      ğŸ“Œ Skill ID: {skill_id}
      ğŸ’¡ Suggestion: Refer to skills via centralized SkillId constants or configuration, not raw strings in business code.
      ğŸ”§ Quick fix: Declare SkillId in a shared constants/config module and access skills via a SkillProvider + SkillId.

  SK002:
    template: |
      ğŸ›ï¸ Skills Usage Judge: Detected direct file access to skill assets
      ğŸ“‹ Offending code: {snippet}
      ğŸ’¡ Suggestion: Do not access assets/skills or SkillsPath.ROOT directly. Always go through a SkillProvider + SkillId.
      ğŸ”§ Quick fix: Use the project's SkillProvider abstraction to orchestrate skills.

  TC001:
    template: |
      ğŸ›ï¸ Type Checking Judge: Detected illegal TYPE_CHECKING usage
      ğŸ’¡ Suggestion: Promote shared dependencies to core/dto and refactor.
      ğŸ”§ Quick fix: Consider using JSONData + factory patterns to solve architectural issues instead of cross-importing types.

  TP001:
    template: |
      ğŸ›ï¸ Test Purity Judge: Detected illegal I/O dependency in a unit test
      ğŸ“Œ Location: {file}:{line}
      ğŸ“‹ Forbidden import: {import_stmt}
      ğŸ’¡ Suggestion: Unit tests must be I/O isolated. Use ports or test doubles (fakes/mocks) instead of real I/O.

  TP002:
    template: |
      ğŸ›ï¸ Test Purity Judge: Detected non-whitelisted tests importing SQLAlchemy directly
      ğŸ“Œ Location: {file}:{line}
      ğŸ“‹ Import statement: {import_stmt}
      ğŸ’¡ Suggestion: Restrict DB integration tests to dedicated locations (e.g. tests/infra/database/contracts/). Other tests should use ports or repository protocols.

  TP003:
    template: |
      ğŸ›ï¸ Test Purity Judge: Detected pseudo-coverage tests that only check symbol existence
      ğŸ“Œ Location: {file}:{line}
      ğŸ“‹ Suspicious pattern: importlib.import_module + hasattr without real behavior checks
      ğŸ’¡ Suggestion: Write tests that call the target function/method at least once and assert real behavior instead of just existence.

  UW001:
    template: |
      ğŸ›ï¸ Unit of Work Judge: Detected illegal use of RepositoryFactory
      ğŸ“‹ Offending method: {method}
      ğŸ’¡ Suggestion: Capsule issuance flows must go through a Unit of Work.
      ğŸ”§ Quick fix: Use uow_factory.create() + uow.repos.* + await uow.commit().
      ğŸ“š Reference: docs/spec/DATA_UOW.md

  UW002:
    template: |
      ğŸ›ï¸ Unit of Work Judge: Detected repository calling commit()
      ğŸ’¡ Suggestion: Business repositories must be flush-only.
      ğŸ”§ Quick fix: Remove commit() and delegate committing to UnitOfWork.commit().
      ğŸ“š Reference: docs/spec/DATA_UOW.md

  UW003:
    template: |
      ğŸ›ï¸ Unit of Work Judge: Detected repository calling rollback()
      ğŸ’¡ Suggestion: Business repositories must be flush-only.
      ğŸ”§ Quick fix: Remove rollback() and delegate rollback to UnitOfWork.rollback().
      ğŸ“š Reference: docs/spec/DATA_UOW.md

  UW004:
    template: |
      ğŸ›ï¸ Unit of Work Judge: Detected capsule issuance bypassing issuer (direct use of uow.repos.time_capsule.*)
      ğŸ’¡ Rule: Any capsule producer must go through TimeCapsuleIssuerPort within the same UoW.
      ğŸ”§ Quick fix: Inject an issuer and call issuer.issue_or_reuse(uow=..., dto=...).
      ğŸ“š Reference: docs/spec/DATA_UOW.md, docs/spec/DATA_CAPSULES.md

  VT001:
    template: |
      ğŸ›ï¸ Vector Transactions Judge: Detected unsupported asset_type
      ğŸ“‹ asset_type: {asset_type}
      ğŸ’¡ Suggestion: Extend the vector provider to handle this asset_type.
      ğŸ”§ Quick fix: Add the corresponding route in the project's vector provider module.

  VT002:
    template: |
      ğŸ›ï¸ Vector Transactions Judge: Detected unsupported capsule_kind
      ğŸ“‹ capsule_kind: {capsule_kind}
      ğŸ’¡ Suggestion: Extend the vector provider to handle this capsule_kind.
      ğŸ”§ Quick fix: Add the corresponding route in the project's vector provider module.

  VT003:
    template: |
      ğŸ›ï¸ Vector Transactions Judge: Detected event missing required fields
      ğŸ“Œ Event: {event_name}
      ğŸ“‹ Missing field: {field}
      ğŸ’¡ Suggestion: Issuers must explicitly carry issuer + capsule_kind.
      ğŸ”§ Quick fix: Vector logic must not infer issuers from DB lookups.
